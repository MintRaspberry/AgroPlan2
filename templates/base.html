<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}AgroPlan - –≠–ª–∏—Ç–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–µ–≤–æ–æ–±–æ—Ä–æ—Ç–∞{% endblock %}</title>
    <meta name="description" content="–ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ–≤–æ–æ–±–æ—Ä–æ—Ç–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏–±—ã–ª–∏">

    <!-- –ü—Ä–µ–º–∏—É–º —à—Ä–∏—Ñ—Ç—ã -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>

    <!-- –ù–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="/static/css/style.css">

    <!-- –ü—Ä–µ–º–∏—É–º —Ñ–∞–≤–∏–∫–æ–Ω -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%230a192f'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='80' fill='%2364ffda'>üå±</text></svg>">

    {% block extra_css %}{% endblock %}
</head>
<body class="{% block body_class %}{% endblock %}">
    <!-- –ü—Ä–µ–º–∏—É–º —Ö–µ–¥–µ—Ä -->
    <header class="header" id="mainHeader">
        <div class="header-content">
            <a href="/" class="logo">
                <div class="logo-icon">
                    üå±
                </div>
                <div class="logo-text">
                    AgroPlan
                </div>
            </a>
            <nav class="nav">
                <a href="/" class="nav-link {% if request.url.path == '/' %}active{% endif %}">
                    <span>üè†</span>
                    <span>–ì–ª–∞–≤–Ω–∞—è</span>
                </a>
                <a href="/fields" class="nav-link {% if request.url.path.startswith('/fields') %}active{% endif %}">
                    <span>üó∫Ô∏è</span>
                    <span>–ü–æ–ª—è</span>
                </a>
                <a href="/history" class="nav-link {% if request.url.path.startswith('/history') %}active{% endif %}">
                    <span>üìä</span>
                    <span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
                </a>
                <a href="/recommendations" class="nav-link {% if request.url.path.startswith('/recommendations') %}active{% endif %}">
                    <span>üí°</span>
                    <span>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</span>
                </a>
                <a href="/calculator" class="nav-link {% if request.url.path.startswith('/calculator') %}active{% endif %}">
                    <span>üßÆ</span>
                    <span>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content">
        <div class="container">
            {% block content %}
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ –¥–æ—á–µ—Ä–Ω–∏—Ö —à–∞–±–ª–æ–Ω–∞—Ö -->
            {% endblock %}
        </div>
    </main>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>

    <!-- –ù–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="/static/js/map.js"></script>
    <script src="/static/js/charts.js"></script>

    <script>
        // –ü—Ä–µ–º–∏—É–º —ç—Ñ—Ñ–µ–∫—Ç —Å–∫—Ä–æ–ª–ª–∞ –¥–ª—è —Ö–µ–¥–µ—Ä–∞
        window.addEventListener('scroll', function() {
            const header = document.getElementById('mainHeader');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        document.addEventListener('DOMContentLoaded', function() {
            const animatedElements = document.querySelectorAll('.animate-fade-in, .animate-slide-in');
            animatedElements.forEach((element, index) => {
                const delay = index * 100;
                element.style.animationDelay = `${delay}ms`;
            });

            // –ü—Ä–µ–º–∏—É–º —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
            const cards = document.querySelectorAll('.feature-card, .stat-card');
            cards.forEach((card, index) => {
                card.style.transitionDelay = `${index * 50}ms`;
            });
        });
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>